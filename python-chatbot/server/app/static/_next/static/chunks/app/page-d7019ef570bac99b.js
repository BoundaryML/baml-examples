(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1854:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(6384),a=s(6636),n=s(4534),i=s(9862);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,n.$)(t))}function o(e){return"".concat(e)}var d=s(6783),c=function(e){return e.User="User",e.Assistant="Assistant",e.Tool="Tool",e}({});function u(e){return(0,r.jsx)("div",{className:"flex flex-col flex-grow gap-5 border-1 border-slate-100 p-4 bg-slate-200 overflow-y-scroll",children:e.items.map((t,s)=>(0,r.jsx)("div",{className:"flex flex-row w-full",children:"role"in t?t.role===c.Tool?(0,r.jsx)(f,{message:t,isLastMessage:s===e.items.length-1}):(0,r.jsx)(x,{message:t,isLastMessage:s===e.items.length-1}):(0,r.jsx)("p",{})},s))})}function x(e){let t=e.message.role===c.Assistant?"bg-blue-200":"bg-slate-300",s=e.message.role===c.Assistant?"justify-start":"justify-end";return(0,r.jsx)("div",{className:"flex w-full ".concat(s),children:(0,r.jsx)("div",{className:"".concat(t," rounded-md p-2 max-w-[80%]"),children:(0,r.jsx)("p",{children:e.message.content})})})}function f(e){e.message.role===c.Tool&&(e.isLastMessage,d.A);let t=e.isLastMessage?"":"opacity-25";return(0,r.jsxs)("div",{className:"flex flex-row w-full justify-center p-2 border-t border-b border-slate-400 gap-2 ".concat(t),children:[(0,r.jsx)("span",{children:e.message.content}),(0,r.jsx)("span",{className:"".concat(e.isLastMessage?"animate-pulse":""),children:(0,r.jsx)(d.A,{})})]})}var g=s(5373);let m=e=>{let{shouldScaleBackground:t=!0,...s}=e;return(0,r.jsx)(g._s.Root,{shouldScaleBackground:t,...s})};m.displayName="Drawer";let p=g._s.Trigger,v=g._s.Portal,h=g._s.Close,b=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g._s.Overlay,{ref:t,className:l("fixed inset-0 z-50 bg-black/80",s),...a})});b.displayName=g._s.Overlay.displayName;let j=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(v,{children:[(0,r.jsx)(b,{}),(0,r.jsxs)(g._s.Content,{ref:t,className:l("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",s),...n,children:[(0,r.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),a]})]})});j.displayName="DrawerContent";let y=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:l("grid gap-1.5 p-4 text-center sm:text-left",t),...s})};y.displayName="DrawerHeader";let w=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g._s.Title,{ref:t,className:l("text-lg font-semibold leading-none tracking-tight",s),...a})});function N(e){return(0,r.jsxs)(m,{children:[(0,r.jsx)(p,{children:(0,r.jsx)("div",{children:(0,r.jsx)("span",{children:"Debug"})})}),(0,r.jsxs)(j,{children:[(0,r.jsx)(h,{children:(0,r.jsx)("div",{children:"Close"})}),(0,r.jsx)(y,{children:(0,r.jsx)(w,{children:"State"})}),(0,r.jsx)("pre",{className:"text-xs",children:JSON.stringify(e.state,null,2)})]})]})}function k(e){let{className:t,type:s,...a}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:l("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}w.displayName=g._s.Title.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(g._s.Description,{ref:t,className:l("text-sm text-muted-foreground",s),...a})}).displayName=g._s.Description.displayName;var _=s(6568);let S=(0,s(88).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function C(e){let{className:t,variant:s,size:a,asChild:n=!1,...i}=e,o=n?_.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:l(S({variant:s,size:a,className:t})),...i})}function E(e){let[t,s]=(0,a.useState)(""),n=(0,a.useCallback)(t=>{let s=Date.now(),r=new EventSource(o("/api/query?message=".concat(t,"&timestamp=").concat(s)),{withCredentials:!0});r.onopen=e=>{console.log("EventSource connection opened:",e)},r.onerror=e=>{console.error("EventSource error:",e),r.readyState===EventSource.CLOSED?console.error("Connection was closed"):r.readyState===EventSource.CONNECTING&&console.error("Connection is reconnecting"),r.close()},r.onmessage=t=>{try{let s=JSON.parse(t.data);e.setState(s)}catch(e){console.error("Error parsing event data:",e)}}},[e.setState]);return(0,r.jsxs)("div",{className:"flex flex-row p-2 gap-2",children:[(0,r.jsx)(k,{type:"text",value:t,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(n(t),s(""))}}),(0,r.jsx)(C,{onClick:()=>n(t),children:"Send"})]})}function D(){let[e,t]=(0,a.useState)({recent_messages:[]});return(0,a.useEffect)(()=>{(async()=>{try{await fetch(o(""),{credentials:"include"});let e=await fetch(o("/api/state"),{credentials:"include"}),s=await e.json();t(s)}catch(e){console.error("Error fetching data:",e)}})()},[]),(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center p-2 flex-size-1",children:"BAML Chatbot"}),(0,r.jsx)(N,{state:e})]}),(0,r.jsx)(u,{items:e.recent_messages||[]}),(0,r.jsx)(E,{setState:t})]})}},2696:(e,t,s)=>{Promise.resolve().then(s.bind(s,1854))}},e=>{var t=t=>e(e.s=t);e.O(0,[777,309,951,358],()=>t(2696)),_N_E=e.O()}]);